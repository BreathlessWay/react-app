{"version":3,"sources":["../static/js/message.d1908c2e.chunk.js","pages/Message/index.js","webpack:///./src/pages/Message/style.less?876f","pages/Message/style.less"],"names":["webpackJsonp","224","module","__webpack_exports__","__webpack_require__","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","defineProperty","__WEBPACK_IMPORTED_MODULE_0_react__","__WEBPACK_IMPORTED_MODULE_0_react___default","n","__WEBPACK_IMPORTED_MODULE_1_axios__","__WEBPACK_IMPORTED_MODULE_1_axios___default","__WEBPACK_IMPORTED_MODULE_2_immutable__","__WEBPACK_IMPORTED_MODULE_3__components_asyncComponent__","__WEBPACK_IMPORTED_MODULE_4__style_less__","_createClass","defineProperties","target","props","i","length","descriptor","key","protoProps","staticProps","MessageList","e","then","bind","Message","_Component","this","_this","getPrototypeOf","state","messageList","has_read_messages","hasnot_read_messages","handleMarkRead","handleMarkReadAll","getMessageList","baseBreadcrumb","path","name","setBreadcrumb","accesstoken","entry","getIn","_this2","a","get","params","res","setState","data","catch","err","errData","response","handleDialog","type","message","error_msg","id","_this3","post","success","getMessageCount","_this4","createElement","className","messageTitle","isRead","noTips","261","exports","content","options","hmr","transform","locals","262","push","version","sources","names","mappings","file","sourcesContent","sourceRoot"],"mappings":"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","file":"static/js/message.d1908c2e.chunk.js","sourcesContent":["webpackJsonp([6],{\n\n/***/ 224:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_axios__ = __webpack_require__(29);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_axios___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_axios__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_immutable__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_immutable___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_immutable__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__components_asyncComponent__ = __webpack_require__(75);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__style_less__ = __webpack_require__(261);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__style_less___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4__style_less__);\nvar _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return call&&(typeof call===\"object\"||typeof call===\"function\")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function, not \"+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var MessageList=Object(__WEBPACK_IMPORTED_MODULE_3__components_asyncComponent__[\"a\" /* default */])(function(){return __webpack_require__.e/* import() */(1).then(__webpack_require__.bind(null, 263));});var Message=function(_Component){_inherits(Message,_Component);function Message(props){_classCallCheck(this,Message);var _this=_possibleConstructorReturn(this,(Message.__proto__||Object.getPrototypeOf(Message)).call(this,props));_this.state={messageList:Object(__WEBPACK_IMPORTED_MODULE_2_immutable__[\"fromJS\"])({has_read_messages:[],hasnot_read_messages:[]})};_this.handleMarkRead=_this.handleMarkRead.bind(_this);_this.handleMarkReadAll=_this.handleMarkReadAll.bind(_this);_this.getMessageList=_this.getMessageList.bind(_this);return _this;}_createClass(Message,[{key:'componentDidMount',value:function componentDidMount(){var baseBreadcrumb=[{path:'/',name:'首页'},{path:'',name:'消息'}];this.props.setBreadcrumb(baseBreadcrumb);var accesstoken=this.props.entry.getIn(['userInfo','accesstoken']);this.getMessageList(accesstoken);}},{key:'getMessageList',value:function getMessageList(accesstoken){var _this2=this;__WEBPACK_IMPORTED_MODULE_1_axios___default.a.get('/messages',{params:{accesstoken:accesstoken}}).then(function(res){_this2.setState({messageList:Object(__WEBPACK_IMPORTED_MODULE_2_immutable__[\"fromJS\"])(res.data.data)});}).catch(function(err){var errData=err.response.data;_this2.props.handleDialog({type:'danger',message:errData?errData.error_msg:'获取消息列表失败'});});}},{key:'handleMarkRead',value:function handleMarkRead(id){var _this3=this;var accesstoken=this.props.entry.getIn(['userInfo','accesstoken']);__WEBPACK_IMPORTED_MODULE_1_axios___default.a.post('/message/mark_one/'+id,{accesstoken:accesstoken}).then(function(res){if(res.data.success){_this3.props.handleDialog({type:'success',message:'标记已读成功'});_this3.props.getMessageCount(accesstoken);_this3.getMessageList(accesstoken);}}).catch(function(err){var errData=err.response.data;_this3.props.handleDialog({type:'danger',message:errData?errData.error_msg:'标记已读失败'});});}},{key:'handleMarkReadAll',value:function handleMarkReadAll(){var _this4=this;var accesstoken=this.props.entry.getIn(['userInfo','accesstoken']);__WEBPACK_IMPORTED_MODULE_1_axios___default.a.post('/message/mark_all',{accesstoken:accesstoken}).then(function(res){if(res.data.success){_this4.props.handleDialog({type:'success',message:'标记全部已读成功'});_this4.props.getMessageCount(accesstoken);_this4.getMessageList(accesstoken);}}).catch(function(err){var errData=err.response.data;_this4.props.handleDialog({type:'danger',message:errData?errData.error_msg:'标记全部已读失败'});});}},{key:'render',value:function render(){return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('article',{className:'container-fluid'},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('section',{className:'container message-index'},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(MessageList,{messageTitle:'\\u5DF2\\u8BFB\\u6D88\\u606F',messageList:this.state.messageList.get('has_read_messages'),isRead:true,noTips:'\\u6CA1\\u6709\\u5DF2\\u8BFB\\u6D88\\u606F'}),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(MessageList,{messageTitle:'\\u672A\\u8BFB\\u6D88\\u606F',messageList:this.state.messageList.get('hasnot_read_messages'),isRead:false,handleMarkRead:this.handleMarkRead,handleMarkReadAll:this.handleMarkReadAll,noTips:'\\u6CA1\\u6709\\u672A\\u8BFB\\u6D88\\u606F'})));}}]);return Message;}(__WEBPACK_IMPORTED_MODULE_0_react__[\"Component\"]);/* harmony default export */ __webpack_exports__[\"default\"] = (Message);\n\n/***/ }),\n\n/***/ 261:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(262);\nif(typeof content === 'string') content = [[module.i, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {\"hmr\":false}\noptions.transform = transform\n// add the styles to the DOM\nvar update = __webpack_require__(213)(content, options);\nif(content.locals) module.exports = content.locals;\n\n\n/***/ }),\n\n/***/ 262:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(212)(true);\n// imports\n\n\n// module\nexports.push([module.i, \".message-index{font-size:14px;background:#fff;min-height:calc(100vh - 57px - 176px - 56px - 24px)}.message-index h3{font-size:20px}.message-index h5{font-size:16px}\", \"\", {\"version\":3,\"sources\":[\"/home/runner/work/react-app/react-app/src/pages/Message/style.less\"],\"names\":[],\"mappings\":\"AAAA,eACE,eAAgB,AAChB,gBAAiB,AACjB,mDAAqD,CACtD,AACD,kBACE,cAAgB,CACjB,AACD,kBACE,cAAgB,CACjB\",\"file\":\"style.less\",\"sourcesContent\":[\".message-index {\\n  font-size: 14px;\\n  background: #fff;\\n  min-height: calc(100vh - 57px - 176px - 56px - 24px);\\n}\\n.message-index h3 {\\n  font-size: 20px;\\n}\\n.message-index h5 {\\n  font-size: 16px;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/message.d1908c2e.chunk.js","import React, { Component } from 'react';\nimport axios from 'axios';\nimport { fromJS } from 'immutable';\nimport asyncComponent from '@components/asyncComponent';\nimport './style.less';\n\nconst MessageList = asyncComponent(() => import(/* webpackChunkName: \"detail\" */ '@components/MessageList'));\n\nexport default class Message extends Component {\n  constructor (props) {\n    super(props);\n    this.state = {\n      messageList: fromJS({\n        has_read_messages: [],\n        hasnot_read_messages: []\n      })\n    };\n    this.handleMarkRead = this.handleMarkRead.bind(this);\n    this.handleMarkReadAll = this.handleMarkReadAll.bind(this);\n    this.getMessageList = this.getMessageList.bind(this);\n  }\n\n  componentDidMount () {\n    const baseBreadcrumb = [\n      {\n        path: '/',\n        name: '首页'\n      },\n      {\n        path: '',\n        name: '消息'\n      }\n    ];\n    this.props.setBreadcrumb(baseBreadcrumb);\n    const accesstoken = this.props.entry.getIn(['userInfo', 'accesstoken']);\n    this.getMessageList(accesstoken);\n  }\n\n  getMessageList (accesstoken) {\n    axios.get('/messages', {params: {accesstoken}})\n    .then(res => {\n      this.setState({\n        messageList: fromJS(res.data.data)\n      });\n    })\n    .catch(err => {\n      const errData = err.response.data;\n      this.props.handleDialog({type: 'danger', message: errData ? errData.error_msg : '获取消息列表失败'});\n    });\n  }\n\n  handleMarkRead (id) {\n    const accesstoken = this.props.entry.getIn(['userInfo', 'accesstoken']);\n    axios.post(`/message/mark_one/${id}`, {accesstoken})\n    .then(res => {\n      if (res.data.success) {\n        this.props.handleDialog({type: 'success', message: '标记已读成功'});\n        this.props.getMessageCount(accesstoken);\n        this.getMessageList(accesstoken);\n      }\n    })\n    .catch(err => {\n      const errData = err.response.data;\n      this.props.handleDialog({type: 'danger', message: errData ? errData.error_msg : '标记已读失败'});\n    });\n  }\n\n  handleMarkReadAll () {\n    const accesstoken = this.props.entry.getIn(['userInfo', 'accesstoken']);\n    axios.post('/message/mark_all', {accesstoken})\n    .then(res => {\n      if (res.data.success) {\n        this.props.handleDialog({type: 'success', message: '标记全部已读成功'});\n        this.props.getMessageCount(accesstoken);\n        this.getMessageList(accesstoken);\n      }\n    })\n    .catch(err => {\n      const errData = err.response.data;\n      this.props.handleDialog({type: 'danger', message: errData ? errData.error_msg : '标记全部已读失败'});\n    });\n  }\n\n  render () {\n    return (\n      <article className=\"container-fluid\">\n        <section className=\"container message-index\">\n          <MessageList messageTitle='已读消息' messageList={ this.state.messageList.get('has_read_messages') } isRead={ true } noTips='没有已读消息'/>\n          <MessageList messageTitle='未读消息' messageList={ this.state.messageList.get('hasnot_read_messages') } isRead={ false } handleMarkRead={ this.handleMarkRead } handleMarkReadAll={ this.handleMarkReadAll } noTips='没有未读消息'/>\n        </section>\n      </article>\n    );\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/Message/index.js","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/index.js??ref--1-oneOf-2-2!../../../node_modules/postcss-loader/lib/index.js??postcss!../../../node_modules/less-loader/dist/cjs.js!./style.less\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {\"hmr\":false}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/Message/style.less\n// module id = 261\n// module chunks = 6","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \".message-index{font-size:14px;background:#fff;min-height:calc(100vh - 57px - 176px - 56px - 24px)}.message-index h3{font-size:20px}.message-index h5{font-size:16px}\", \"\", {\"version\":3,\"sources\":[\"/home/runner/work/react-app/react-app/src/pages/Message/style.less\"],\"names\":[],\"mappings\":\"AAAA,eACE,eAAgB,AAChB,gBAAiB,AACjB,mDAAqD,CACtD,AACD,kBACE,cAAgB,CACjB,AACD,kBACE,cAAgB,CACjB\",\"file\":\"style.less\",\"sourcesContent\":[\".message-index {\\n  font-size: 14px;\\n  background: #fff;\\n  min-height: calc(100vh - 57px - 176px - 56px - 24px);\\n}\\n.message-index h3 {\\n  font-size: 20px;\\n}\\n.message-index h5 {\\n  font-size: 16px;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader?{\"importLoaders\":1,\"minimize\":true,\"sourceMap\":true}!./node_modules/postcss-loader/lib?{\"ident\":\"postcss\",\"plugins\":[null,null]}!./node_modules/less-loader/dist/cjs.js!./src/pages/Message/style.less\n// module id = 262\n// module chunks = 6"],"sourceRoot":""}
webpackJsonp([6],{224:function(e,s,t){"use strict";function a(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}function n(e,s){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!s||"object"!==typeof s&&"function"!==typeof s?e:s}function r(e,s){if("function"!==typeof s&&null!==s)throw new TypeError("Super expression must either be null or a function, not "+typeof s);e.prototype=Object.create(s&&s.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),s&&(Object.setPrototypeOf?Object.setPrototypeOf(e,s):e.__proto__=s)}Object.defineProperty(s,"__esModule",{value:!0});var o=t(0),i=t.n(o),c=t(29),p=t.n(c),l=t(5),g=(t.n(l),t(75)),u=t(261),f=(t.n(u),function(){function e(e,s){for(var t=0;t<s.length;t++){var a=s[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(s,t,a){return t&&e(s.prototype,t),a&&e(s,a),s}}()),d=Object(g.a)(function(){return t.e(1).then(t.bind(null,263))}),h=function(e){function s(e){a(this,s);var t=n(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,e));return t.state={messageList:Object(l.fromJS)({has_read_messages:[],hasnot_read_messages:[]})},t.handleMarkRead=t.handleMarkRead.bind(t),t.handleMarkReadAll=t.handleMarkReadAll.bind(t),t.getMessageList=t.getMessageList.bind(t),t}return r(s,e),f(s,[{key:"componentDidMount",value:function(){var e=[{path:"/",name:"\u9996\u9875"},{path:"",name:"\u6d88\u606f"}];this.props.setBreadcrumb(e);var s=this.props.entry.getIn(["userInfo","accesstoken"]);this.getMessageList(s)}},{key:"getMessageList",value:function(e){var s=this;p.a.get("/messages",{params:{accesstoken:e}}).then(function(e){s.setState({messageList:Object(l.fromJS)(e.data.data)})}).catch(function(e){var t=e.response.data;s.props.handleDialog({type:"danger",message:t?t.error_msg:"\u83b7\u53d6\u6d88\u606f\u5217\u8868\u5931\u8d25"})})}},{key:"handleMarkRead",value:function(e){var s=this,t=this.props.entry.getIn(["userInfo","accesstoken"]);p.a.post("/message/mark_one/"+e,{accesstoken:t}).then(function(e){e.data.success&&(s.props.handleDialog({type:"success",message:"\u6807\u8bb0\u5df2\u8bfb\u6210\u529f"}),s.props.getMessageCount(t),s.getMessageList(t))}).catch(function(e){var t=e.response.data;s.props.handleDialog({type:"danger",message:t?t.error_msg:"\u6807\u8bb0\u5df2\u8bfb\u5931\u8d25"})})}},{key:"handleMarkReadAll",value:function(){var e=this,s=this.props.entry.getIn(["userInfo","accesstoken"]);p.a.post("/message/mark_all",{accesstoken:s}).then(function(t){t.data.success&&(e.props.handleDialog({type:"success",message:"\u6807\u8bb0\u5168\u90e8\u5df2\u8bfb\u6210\u529f"}),e.props.getMessageCount(s),e.getMessageList(s))}).catch(function(s){var t=s.response.data;e.props.handleDialog({type:"danger",message:t?t.error_msg:"\u6807\u8bb0\u5168\u90e8\u5df2\u8bfb\u5931\u8d25"})})}},{key:"render",value:function(){return i.a.createElement("article",{className:"container-fluid"},i.a.createElement("section",{className:"container message-index"},i.a.createElement(d,{messageTitle:"\u5df2\u8bfb\u6d88\u606f",messageList:this.state.messageList.get("has_read_messages"),isRead:!0,noTips:"\u6ca1\u6709\u5df2\u8bfb\u6d88\u606f"}),i.a.createElement(d,{messageTitle:"\u672a\u8bfb\u6d88\u606f",messageList:this.state.messageList.get("hasnot_read_messages"),isRead:!1,handleMarkRead:this.handleMarkRead,handleMarkReadAll:this.handleMarkReadAll,noTips:"\u6ca1\u6709\u672a\u8bfb\u6d88\u606f"})))}}]),s}(o.Component);s.default=h},261:function(e,s,t){var a=t(262);"string"===typeof a&&(a=[[e.i,a,""]]);var n={hmr:!1};n.transform=void 0;t(213)(a,n);a.locals&&(e.exports=a.locals)},262:function(e,s,t){s=e.exports=t(212)(!0),s.push([e.i,".message-index{font-size:14px;background:#fff;min-height:calc(100vh - 57px - 176px - 56px - 24px)}.message-index h3{font-size:20px}.message-index h5{font-size:16px}","",{version:3,sources:["/Users/zhujian/Desktop/react-app/src/pages/Message/style.less"],names:[],mappings:"AAAA,eACE,eAAgB,AAChB,gBAAiB,AACjB,mDAAqD,CACtD,AACD,kBACE,cAAgB,CACjB,AACD,kBACE,cAAgB,CACjB",file:"style.less",sourcesContent:[".message-index {\n  font-size: 14px;\n  background: #fff;\n  min-height: calc(100vh - 57px - 176px - 56px - 24px);\n}\n.message-index h3 {\n  font-size: 20px;\n}\n.message-index h5 {\n  font-size: 16px;\n}\n"],sourceRoot:""}])}});
//# sourceMappingURL=message.73236cdc.chunk.js.map